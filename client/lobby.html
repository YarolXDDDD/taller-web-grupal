<!DOCTYPE html>
<html lang="es-VE">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta author="Oscar Manrique"/>
    <meta name="description" content="Este es un juego de Batalla Naval" />
    <meta name="keywords" content="Batalla Naval, juego, taller, semestre" />
    <meta name="robots" content="index,follow" />
    <title>Batalla Naval | Torneo</title>
    <link rel="icon" href="https://seguropordias.com/img/contenido/barco-famoso-titanic.jpg" type="image/png" size="16x16 32x32 64x64" />
    <link rel="stylesheet" href="styles/styles.css" type="text/css"/>
    <link rel="stylesheet" href="styles/torneo-styles.css" type="text/css"/>
    <script src="script/script.js" type="text/javascript"></script>
</head>
<body>

    <script>
        const ws= new WebSocket('ws://localhost:8080');
        
        ws.addEventListener('open', ()=>{
            console.log('Conectado al servidor');
            ws.send(JSON.stringify({type:'getPlayers', gameId:localStorage.getItem('partidaActiva')}));
        })

        ws.addEventListener('close', ()=>{
            console.log('desconectado del servidor');
        })

        ws.addEventListener('message', (event)=>{
            const mensaje= JSON.parse(event.data);
            console.log(mensaje);
            switch (mensaje.type){
                case 'gameCreated':{
                    console.log('el juego ha sido creado exitosamente');
                    localStorage.setItem('partidaActiva',mensaje.gameId);
                }
                    break;
                case 'playerJoined':{
                    console.log('te has unido a un juego exitosamente');
                }
                    break;
                case 'start':{
                    console.log('se ha iniciado el juego');
                } 
                break;
                case 'getPlayers':{
                    console.log(mensaje.gamePlayers);
                    alterarLobby(localStorage.getItem('cantidadJugadores'), localStorage.getItem('partidaActiva'),mensaje.gamePlayers);
                }
                break;
            }
        })

    </script>
</body>
</html>